{"version":3,"file":"payoneer-checkout.js","mappings":"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","sources":["webpack://payoneer-embedded-payment/webpack/bootstrap","webpack://payoneer-embedded-payment/webpack/runtime/compat get default export","webpack://payoneer-embedded-payment/webpack/runtime/define property getters","webpack://payoneer-embedded-payment/webpack/runtime/hasOwnProperty shorthand","webpack://payoneer-embedded-payment/external window \"jQuery\"","webpack://payoneer-embedded-payment/./resources/js/src/util/woocommerce.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://payoneer-embedded-payment/external window \"regeneratorRuntime\"","webpack://payoneer-embedded-payment/./resources/js/src/util/sdk/umdLoader.js","webpack://payoneer-embedded-payment/./resources/js/src/util/sdk.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://payoneer-embedded-payment/./resources/js/src/PayoneerPaymentFields.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://payoneer-embedded-payment/./resources/js/src/util/fields.js","webpack://payoneer-embedded-payment/./resources/js/payoneer-checkout.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","import $ from 'jquery';\n\nexport const selectedPaymentGatewayId = () => {\n\treturn document.querySelector(\n\t\t'.woocommerce-checkout input[name=\"payment_method\"]:checked'\n\t)?.id;\n};\n\nexport const isPayoneerGateway = ( gatewayId ) => {\n\treturn /^payment_method_payoneer-(checkout|afterpay)/i.test(\n\t\tgatewayId\n\t);\n};\n\nexport const isPayoneerGatewaySelected = () => isPayoneerGateway( selectedPaymentGatewayId() );\n\nexport const isPayForOrder = () => {\n\treturn window.PayoneerData.isPayForOrder === '1';\n};\n\nexport const getPaymentBox = ( gatewayId ) => {\n\tconst selector = '.payment_box.' + gatewayId;\n\treturn document.querySelector( selector );\n};\n\nexport const getSelectedPaymentBox = () => getPaymentBox( selectedPaymentGatewayId() );\n\nexport const payoneerGateways = () => {\n\treturn Array.from( document.querySelectorAll(\n\t\t'.woocommerce-checkout input[name=\"payment_method\"]'\n\t) ).map( input => input.id ).filter( isPayoneerGateway )\n}\n\nexport const hostedOverrideFlagInput = () => {\n\tconst { hostedFlowOverrideFlag } = window.PayoneerData;\n\treturn document.querySelector( `input[name=\"${hostedFlowOverrideFlag}\"]` );\n};\n\nexport const hostedOverrideActive = () => {\n\tlet input = hostedOverrideFlagInput();\n\treturn input?.disabled === true;\n};\n\nexport const setHostedOverride = ( enabled ) => {\n\tlet input = hostedOverrideFlagInput();\n\tif ( input ) {\n\t\tinput.disabled = !enabled;\n\t}\n};\n\nexport const submitOrderPayViaAjax = ( $form ) => {\n\t//Blocks the UI in the same way Woocommerce does (source: https://github.com/woocommerce/woocommerce/blob/6.0.1/plugins/woocommerce/assets/js/frontend/checkout.js#L454-L466)\n\t$form.block( {\n\t\tmessage: null,\n\t\toverlayCSS: {\n\t\t\tbackground: '#fff',\n\t\t\topacity: 0.6,\n\t\t},\n\t} );\n\n\treturn $.ajax( {\n\t\ttype: 'POST',\n\t\turl: window.wc_checkout_params.ajax_url,\n\t\txhrFields: {\n\t\t\t// This is important. We need the session cookie to access the LIST in the back-end\n\t\t\twithCredentials: true,\n\t\t},\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\taction: 'payoneer_order_pay',\n\t\t\tfields: $form.serialize(),\n\t\t\tparams: new URL( document.location ).searchParams.toString(),\n\t\t},\n\t} ).always( () => $form.unblock() );\n};\n","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"regeneratorRuntime\"];","/*\n * Since the WebSDK is not yet available on npm, we asynchronously\n * load the UMD version from the appropriate env whenever the SDK is initialized\n * for the first time.\n */\n\nconst formatUmdUrl = ( env ) => {\n\treturn new URL(\n\t\twindow.PayoneerData.webSdkUmdUrlTemplate?.replace( '<env>', env )\n\t);\n};\n\nconst sdkLoader = ( config ) => {\n\tif ( window.Payoneer?.CheckoutWeb ) {\n\t\treturn window.Payoneer.CheckoutWeb( config );\n\t}\n\n\treturn new Promise( ( resolve, reject ) => {\n\t\tconst script = document.createElement( 'script' );\n\t\tscript.src = formatUmdUrl( config.env );\n\t\tscript.onload = resolve;\n\t\tscript.onerror = reject;\n\t\tdocument.head.appendChild( script );\n\t} ).then( () => {\n\t\treturn window.Payoneer.CheckoutWeb( config );\n\t} );\n};\n\nexport default sdkLoader;\n","import initializeSdk from './sdk/umdLoader';\n\nlet sdkInstance = null;\nlet sdkLongId = \"\";\n\nexport const createSdk = async ( onSdkError ) => {\n\tconst listUrlInput = document.getElementById( window.PayoneerData.listUrlContainerId );\n\tif ( !listUrlInput ) {\n\t\tthrow new Error( 'No list-url input present, cannot create SDK instance' );\n\t}\n\n\tconst {\n\t\tlistIdAttribute,\n\t\tlistEnvAttribute,\n\t\twebsdkStyles: styles\n\t} = window.PayoneerData;\n\n\tconst env = listUrlInput.getAttribute( listEnvAttribute ),\n\t\tlongId = listUrlInput.getAttribute( listIdAttribute );\n\n\t/**\n\t * Always create a new sdk instance if the longId changed.\n\t * Avoids having stale list-sessions lingering causing trouble.\n\t */\n\tif ( !sdkInstance || sdkLongId !== longId ) {\n\t\tsdkInstance = await initializeSdk( {\n\t\t\tenv,\n\t\t\tlongId,\n\t\t\tonBeforeError: onSdkError,\n\t\t\tpreload: ['cards'],\n\t\t\tstyles,\n\t\t} );\n\t\tsdkLongId = longId;\n\t} else {\n\t\t//Updating the longId will trigger a refresh, to (dis)allow certain drop-in components.\n\t\tsdkInstance.updateLongId(longId);\n\t}\n\n\treturn sdkInstance;\n};\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","import { sdkFactory } from './util/sdk';\nimport { isPayForOrder } from './util/woocommerce';\nimport $ from 'jquery';\n\nclass PayoneerPaymentFields {\n\n\tconstructor( {\n\t\tsdk,\n\t\tpaymentFieldsContainerId,\n\t\tpaymentFieldsComponentAttribute,\n\t} ) {\n\t\tthis.sdk = sdk;\n\n\t\tthis.paymentFieldsContainerId = paymentFieldsContainerId;\n\t\tthis.paymentFieldsComponentAttribute = paymentFieldsComponentAttribute;\n\t}\n\n\tsetElement(element) {\n\t\tthis.element = element;\n\n\t\tthis.dropInContainer = this.element.querySelector(\n\t\t\t`.${this.paymentFieldsContainerId}`\n\t\t);\n\n\t\tthis.dropInComponentName = this.dropInContainer.getAttribute(\n\t\t\tthis.paymentFieldsComponentAttribute\n\t\t);\n\t}\n\n\trender() {\n\t\tif(!this.element) {\n\t\t\tthrow new Error( 'render() called before element was set.' );\n\t\t}\n\n\t\ttry {\n\t\t\tthis.mount();\n\t\t} catch ( e ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error( e );\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdropIn() {\n\t\tif ( this._dropIn ) {\n\t\t\treturn this._dropIn;\n\t\t}\n\n\t\tif (\n\t\t\t! this.sdk\n\t\t\t\t.availableDropInComponents()\n\t\t\t\t.map( ( v ) => v.name )\n\t\t\t\t.includes( this.dropInComponentName )\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t'Invalid dropIn component provided: ' + this.dropInComponentName\n\t\t\t);\n\t\t}\n\n\t\treturn ( this._dropIn = this.sdk.dropIn( this.dropInComponentName, {\n\t\t\thidePaymentButton: true,\n\t\t} ) );\n\t}\n\n\tmount() {\n\t\tconst dropIn = this.dropIn();\n\t\tthis.dropInContainer.innerHTML = '';\n\n\t\tdropIn.mount( this.dropInContainer );\n\t}\n\n\tunmount() {\n\t\ttry {\n\t\t\tthis.dropIn().unmount();\n\t\t} catch(e) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error( e );\n\t\t}\n\t}\n\n\tpay() {\n\t\t//Reloading sdk before pay() ensures we catch list session expiration\n\t\tthis.sdk.reload();\n\t\tthis.dropIn().pay();\n\t}\n}\n\nexport default PayoneerPaymentFields;\n","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","import PayoneerPaymentFields from \"../PayoneerPaymentFields\";\nimport { getPaymentBox, selectedPaymentGatewayId } from \"./woocommerce\";\n\n\nlet fieldInstances = {};\n\nexport const createPaymentFields = ( gatewayId, sdk ) => {\n\tconst {\n\t\tpaymentFieldsContainerId,\n\t\tpaymentFieldsComponentAttribute,\n\t\tonErrorRefreshFragmentFlag,\n\t} = window.PayoneerData;\n\n\tfieldInstances[ gatewayId ] = new PayoneerPaymentFields( {\n\t\tsdk,\n\t\tpaymentFieldsContainerId,\n\t\tpaymentFieldsComponentAttribute,\n\t\tonErrorRefreshFragmentFlag,\n\t} );\n\n\tconst element = getPaymentBox( gatewayId );\n\tif ( element ) {\n\t\tfieldInstances[ gatewayId ].setElement( element );\n\t}\n\n\treturn fieldInstances[ gatewayId ];\n};\n\n\nexport const getPaymentFields = ( gatewayId ) => fieldInstances[ gatewayId ];\nexport const getCurrentPaymentFields = () => getPaymentFields( selectedPaymentGatewayId() );\n","import $ from 'jquery';\nimport {\n\tgetSelectedPaymentBox,\n\thostedOverrideActive,\n\tisPayForOrder,\n\tisPayoneerGatewaySelected,\n\tpayoneerGateways,\n\tsetHostedOverride,\n\tsubmitOrderPayViaAjax\n} from './src/util/woocommerce';\nimport { createSdk } from \"./src/util/sdk\";\nimport { createPaymentFields, getCurrentPaymentFields } from \"./src/util/fields\";\n\ndocument.addEventListener(\n\t'DOMContentLoaded',\n\tfunction () {\n\t\tconst $checkoutForm = $( 'form.checkout' );\n\t\tconst $orderReviewForm = $( '#order_review' );\n\n\t\tconst onSdkError = ( checkout, component, data ) => {\n\t\t\tconst { onErrorRefreshFragmentFlag } = window.PayoneerData;\n\t\t\tconsole.error( \"WebSDK error:\", { checkout, component, data } );\n\n\t\t\t//Only act on expired session or system failure, for anything else a refresh won't resolve the error.\n\t\t\tif ( ! [\"EXPIRED_SESSION\", \"SYSTEM_FAILURE\"].includes(data?.interaction?.reason) ) {\n\t\t\t\t//Re-enable hosted override so we don't block the checkout flow completely.\n\t\t\t\tsetHostedOverride( true );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( isPayForOrder() ) {\n\t\t\t\tconst url = new URL( document.location );\n\t\t\t\turl.searchParams.set( window.PayoneerData.payOrderErrorFlag, true );\n\t\t\t\twindow.location.href = url.toString();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet errorFlag = document.querySelector( `input[name=\"${onErrorRefreshFragmentFlag}\"]` );\n\t\t\tif ( errorFlag ) {\n\t\t\t\terrorFlag.value = 'true';\n\t\t\t}\n\n\t\t\t$( document.body ).trigger( 'update_checkout' );\n\t\t};\n\n\t\tconst onUpdatedCheckout = () => {\n\t\t\tcreateSdk( onSdkError ).then( sdk => {\n\t\t\t\tlet success = false;\n\t\t\t\tfor ( const gatewayId of payoneerGateways() ) {\n\t\t\t\t\tconst paymentFields = createPaymentFields( gatewayId, sdk );\n\t\t\t\t\tsuccess = paymentFields.render();\n\t\t\t\t\tif( !success ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsetHostedOverride( !success );\n\t\t\t} ).catch( err => {\n\t\t\t\tconsole.error( \"WebSDK creation error:\", err );\n\t\t\t\tsetHostedOverride( true )\n\t\t\t} );\n\t\t}\n\n\t\tconst startPayment = () => {\n\t\t\tconst paymentFields = getCurrentPaymentFields();\n\t\t\tpaymentFields && paymentFields.pay();\n\t\t};\n\n\t\t/**\n\t\t * Cannot use native event listener for events dispatched by jQuery\n\t\t * https://github.com/jquery/jquery/issues/3347\n\t\t */\n\t\t$( document.body ).on( 'updated_checkout', onUpdatedCheckout );\n\n\t\t$checkoutForm.on( 'checkout_place_order_success', ( e, result ) => {\n\t\t\tif ( !isPayoneerGatewaySelected() || !hostedOverrideActive() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tstartPayment();\n\n\t\t\t//Override default redirect to hosted payment page\n\t\t\tresult.redirect = '#payoneer-redirect';\n\n\t\t\t/**\n\t\t\t * Create a timeout that races the SDK's payment handling.\n\t\t\t * If the handling is not done after 1,5 second, it unblocks\n\t\t\t * the checkout form and scrolls the users to the payment fields\n\t\t\t * because probably there is an error displayed there\n\t\t\t *\n\t\t\t * This is done since the SDK does not have any validation callback\n\t\t\t * or Promise we could attach to.\n\t\t\t */\n\t\t\tsetTimeout( () => {\n\t\t\t\t$checkoutForm.removeClass( 'processing' ).unblock();\n\t\t\t\t$.scroll_to_notices(\n\t\t\t\t\t$( getSelectedPaymentBox() )\n\t\t\t\t);\n\t\t\t}, 1500 );\n\n\t\t\treturn true;\n\t\t} );\n\n\t\t$orderReviewForm.on( 'submit', ( e ) => {\n\t\t\tif ( !isPayoneerGatewaySelected() || !hostedOverrideActive() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tsubmitOrderPayViaAjax( $orderReviewForm )\n\t\t\t\t.then( () => startPayment() )\n\t\t\t\t.catch( () => {\n\t\t\t\t\t/**\n\t\t\t\t\t * Reloading enables us to see error messages added via wc_add_notice()\n\t\t\t\t\t * Scrolling up makes sure the notices are in the viewport after the refresh\n\t\t\t\t\t */\n\t\t\t\t\twindow.scrollTo( 0, 0 );\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t} );\n\t\t} );\n\n\t\t/**\n\t\t * No fragment update on 'order-pay'. So we manually initialize our widget\n\t\t * and listen to the native JS change event for the radio button\n\t\t */\n\t\tif ( isPayForOrder() ) {\n\t\t\tonUpdatedCheckout();\n\t\t}\n\t},\n\tfalse,\n);\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","selectedPaymentGatewayId","_document$querySelect","document","querySelector","id","isPayoneerGateway","gatewayId","test","isPayoneerGatewaySelected","isPayForOrder","PayoneerData","getPaymentBox","selector","hostedOverrideFlagInput","hostedFlowOverrideFlag","concat","hostedOverrideActive","input","disabled","setHostedOverride","enabled","asyncGeneratorStep","n","t","e","r","c","i","u","value","done","Promise","resolve","then","config","_window$Payoneer","Payoneer","CheckoutWeb","reject","env","_window$PayoneerData$","script","createElement","src","URL","webSdkUmdUrlTemplate","replace","onload","onerror","head","appendChild","sdkInstance","sdkLongId","createSdk","_ref","_regeneratorRuntime","_callee","onSdkError","listUrlInput","_window$PayoneerData","listIdAttribute","listEnvAttribute","styles","longId","_context","prev","next","getElementById","listUrlContainerId","Error","websdkStyles","getAttribute","initializeSdk","onBeforeError","preload","sent","updateLongId","abrupt","stop","this","arguments","apply","_next","_throw","_x","_typeof","Symbol","iterator","constructor","toPropertyKey","toPrimitive","TypeError","String","_defineProperties","length","configurable","writable","PayoneerPaymentFields","sdk","paymentFieldsContainerId","paymentFieldsComponentAttribute","_classCallCheck","element","dropInContainer","dropInComponentName","mount","console","error","_dropIn","availableDropInComponents","map","v","name","includes","dropIn","hidePaymentButton","innerHTML","unmount","reload","pay","fieldInstances","createPaymentFields","onErrorRefreshFragmentFlag","setElement","addEventListener","$checkoutForm","$","$orderReviewForm","checkout","component","data","_data$interaction","interaction","reason","url","location","searchParams","set","payOrderErrorFlag","href","toString","errorFlag","body","trigger","onUpdatedCheckout","_step","success","_iterator","_createForOfIteratorHelper","Array","from","querySelectorAll","filter","s","render","err","f","catch","startPayment","paymentFields","on","result","redirect","setTimeout","removeClass","unblock","$form","preventDefault","stopImmediatePropagation","block","message","overlayCSS","background","opacity","type","wc_checkout_params","ajax_url","xhrFields","withCredentials","dataType","action","fields","serialize","params","always","scrollTo"],"sourceRoot":""}